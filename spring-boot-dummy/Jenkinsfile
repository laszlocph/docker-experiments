node ('master'){
    checkout scm
    stage ('Build and Test') {
        dir('spring-boot-dummy') {
            sh './gradlew clean build'
        }
    }
    stage ('Build Docker image') {
        dir('spring-boot-dummy') {
            sh 'cp build/libs/spring-boot-dummy-0.1.0.jar docker/'
        }
        dir('spring-boot-dummy/docker') {
            sh 'docker build -t laszlocph/spring-boot-dummy:latest .'
        }
    }
}
